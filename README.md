<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />

# Forsion AI Studio

ä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„ AI èŠå¤©å¹³å°ï¼Œæ”¯æŒå¤šç§ AI æ¨¡å‹ï¼Œæä¾›ä¼ä¸šçº§ç”¨æˆ·ç®¡ç†å’Œè‡ªå®šä¹‰é…ç½®åŠŸèƒ½ã€‚

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-19-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-orange.svg)](https://www.mysql.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)

</div>

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒ Geminiã€OpenAI GPTã€DeepSeekã€Claude ç­‰å¤šç§ AI æ¨¡å‹
- ğŸ¨ **ç²¾ç¾ç•Œé¢**ï¼šç°ä»£åŒ– UI è®¾è®¡ï¼Œæ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜å’Œ Notion é£æ ¼é¢„è®¾
- ğŸ’­ **æ·±åº¦æ€è€ƒ**ï¼šæ”¯æŒ AI æ€è€ƒè¿‡ç¨‹æŠ˜å æ˜¾ç¤ºï¼Œä¸€é”®å±•å¼€æŸ¥çœ‹æ¨ç†è¿‡ç¨‹
- ğŸ“ **æµå¼è¾“å‡º**ï¼šç±»ä¼¼ ChatGPT çš„å®æ—¶é€å­—æ˜¾ç¤ºæ•ˆæœ
- ğŸ”¢ **æ•°å­¦å…¬å¼**ï¼šæ”¯æŒ LaTeX/KaTeX æ•°å­¦å…¬å¼æ¸²æŸ“
- ğŸ’» **ä»£ç é«˜äº®**ï¼šå¸¦è¯­è¨€æ ‡ç­¾å’Œä¸€é”®å¤åˆ¶åŠŸèƒ½çš„ä»£ç å—
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†**ï¼šå®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼Œæ”¯æŒç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è§’è‰²
- ğŸ’¬ **ä¼šè¯ç®¡ç†**ï¼šå¤šä¼šè¯æ”¯æŒï¼Œæœ¬åœ°å­˜å‚¨èŠå¤©å†å²
- ğŸ–¼ï¸ **æ–‡ä»¶å¤„ç†**ï¼šæ”¯æŒå›¾ç‰‡ã€PDFã€Word æ–‡æ¡£ä¸Šä¼ å’Œå¤„ç†
- âš™ï¸ **è‡ªå®šä¹‰é…ç½®**ï¼šç®¡ç†å‘˜é¢æ¿é…ç½® API å’Œæ·»åŠ è‡ªå®šä¹‰æ¨¡å‹
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ³ **Docker éƒ¨ç½²**ï¼šä¸€é”® Docker Compose éƒ¨ç½²

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| å‰ç«¯ | åç«¯ | æ•°æ®åº“ | éƒ¨ç½² |
|------|------|--------|------|
| React 19 | Express.js | MySQL 8.0 | Docker |
| TypeScript | TypeScript | - | Nginx |
| Vite | JWT Auth | - | Docker Compose |
| Tailwind CSS | - | - | - |
| KaTeX | - | - | - |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼ï¼Œè‡ªåŠ¨é…ç½® MySQLã€åç«¯å’Œå‰ç«¯æœåŠ¡ã€‚

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/forsion-ai-studio.git
cd forsion-ai-studio

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼Œä½¿ç”¨é»˜è®¤å€¼ä¹Ÿå¯ä»¥ï¼‰
# å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥åˆ›å»º .env æ–‡ä»¶ï¼Œå‚è€ƒä¸‹é¢çš„ç¯å¢ƒå˜é‡è¯´æ˜

# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬ MySQLã€åç«¯ã€å‰ç«¯ï¼‰
# æ³¨æ„ï¼šç”±äº MySQL æœåŠ¡ä½¿ç”¨äº† profilesï¼Œéœ€è¦æ˜¾å¼æŒ‡å®š --profile mysql
docker compose --profile mysql up -d

# æˆ–è€…å¦‚æœåªéœ€è¦å¯åŠ¨åç«¯å’Œå‰ç«¯ï¼ˆä½¿ç”¨å¤–éƒ¨ MySQLï¼‰
# docker compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker compose ps

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f
```

å¯åŠ¨åè®¿é—®ï¼š
- **å‰ç«¯ç•Œé¢**ï¼šhttp://localhost:8080
- **ç®¡ç†åå°**ï¼šhttp://localhost:8080/admin
- **API æœåŠ¡**ï¼šhttp://localhost:8080/apiï¼ˆé€šè¿‡ Nginx ä»£ç†ï¼‰

é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š`admin` / `Admin123!@#`

> **æç¤º**ï¼šå¦‚æœéœ€è¦æ›´ç®€å•çš„éƒ¨ç½²ä½“éªŒï¼Œå¯ä»¥ç§»é™¤ `docker-compose.yml` ä¸­ MySQL æœåŠ¡çš„ `profiles: [mysql]` é…ç½®ï¼Œè¿™æ · `docker compose up -d` å°±ä¼šè‡ªåŠ¨å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æœ¬åœ°å¼€å‘

#### 1. ç¯å¢ƒè¦æ±‚

- Node.js 18+
- MySQL 8.0+
- npm æˆ– yarn

#### 2. é…ç½® MySQL æ•°æ®åº“

```sql
-- ç™»å½• MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE forsion_ai_studio CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
CREATE USER 'forsion'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON forsion_ai_studio.* TO 'forsion'@'localhost';
FLUSH PRIVILEGES;
```

#### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd server-node

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯

# åˆå§‹åŒ–æ•°æ®åº“
npm run db:migrate
npm run db:seed

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd client

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ http://localhost:50173ï¼Œåç«¯åœ¨ http://localhost:3001

## ğŸ“– éƒ¨ç½²æ•™ç¨‹

è¯¦ç»†çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [DEPLOY.md](./DEPLOY.md)ï¼ŒåŒ…æ‹¬ï¼š


- Linux æœåŠ¡å™¨éƒ¨ç½²
- MySQL é…ç½®è¯¦è§£
- ç¯å¢ƒå˜é‡é…ç½®
- Nginx åå‘ä»£ç†
- HTTPS é…ç½®
- è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

#### åç«¯ (`server-node/.env`)

```env
# æœåŠ¡ç«¯å£
PORT=3001
NODE_ENV=development

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password_here
DB_NAME=forsion_ai_studio

# JWT é…ç½®
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# ç®¡ç†å‘˜é»˜è®¤å‡­æ®
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin
```

#### Docker Compose (`.env`)

```env
# MySQL é…ç½®
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=forsion_ai_studio
MYSQL_USER=forsion
MYSQL_PASSWORD=forsion123

# åç«¯é…ç½®ï¼ˆå¯é€‰ï¼Œä½¿ç”¨é»˜è®¤å€¼ä¹Ÿå¯ä»¥ï¼‰
PORT=3002
DB_HOST=mysql
DB_PORT=3306
DB_USER=forsion
DB_PASSWORD=forsion123
DB_NAME=forsion_ai_studio

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹ï¼‰
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# å‰ç«¯ç«¯å£ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 8080ï¼‰
FRONTEND_PORT=8080
```

> **æ³¨æ„**ï¼šå‰ç«¯ä¼šè‡ªåŠ¨æ£€æµ‹ API åœ°å€ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½® `VITE_API_URL`ã€‚

### ç®¡ç†å‘˜é¢æ¿

è®¿é—® `/admin` è¿›å…¥ç®¡ç†å‘˜é¢æ¿ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š

- **ç”¨æˆ·ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ç”¨æˆ·
- **æ¨¡å‹ç®¡ç†**ï¼šæ·»åŠ è‡ªå®šä¹‰ AI æ¨¡å‹ï¼Œé…ç½® API å¯†é’¥
- **ä½¿ç”¨ç»Ÿè®¡**ï¼šæŸ¥çœ‹ API è°ƒç”¨ç»Ÿè®¡

## ğŸ” å¸¸è§é—®é¢˜ä¸æ•…éšœæ’æŸ¥

### æ•°æ®åº“åˆå§‹åŒ–

#### é—®é¢˜ï¼šæ•°æ®åº“è¡¨ç»“æ„ç¼ºå¤±

**ç—‡çŠ¶**ï¼šåç«¯æ—¥å¿—ä¸­å‡ºç°ç±»ä¼¼é”™è¯¯ï¼š
- `Unknown column 'avatar' in 'field list'`
- `Table 'forsion_ai_studio.user_credits' doesn't exist`
- `Table 'forsion_ai_studio.invite_codes' doesn't exist`

**è§£å†³æ–¹æ¡ˆ**ï¼š

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç”±äºå®¹å™¨åªåŒ…å«ç¼–è¯‘åçš„ä»£ç ï¼Œä¸èƒ½ä½¿ç”¨ `npm run db:migrate`ã€‚éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ SQL æˆ–ä½¿ç”¨ç¼–è¯‘åçš„è¿ç§»è„šæœ¬ï¼š

```bash
# æ–¹æ³•ä¸€ï¼šç›´æ¥è¿è¡Œç¼–è¯‘åçš„è¿ç§»è„šæœ¬ï¼ˆæ¨èï¼‰
docker compose exec backend node dist/db/migrate.js
docker compose exec backend node dist/db/seed.js

# æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ SQL ä¿®å¤
# æ·»åŠ ç¼ºå¤±çš„å­—æ®µ
docker compose exec mysql mysql -u root -prootpassword forsion_ai_studio -e "
ALTER TABLE global_models 
  ADD COLUMN avatar MEDIUMTEXT AFTER icon,
  ADD COLUMN prompt_caching_enabled BOOLEAN DEFAULT FALSE AFTER is_enabled,
  ADD COLUMN system_prompt TEXT AFTER prompt_caching_enabled,
  ADD COLUMN cacheable_content TEXT AFTER system_prompt;
" 2>/dev/null || echo "å­—æ®µå¯èƒ½å·²å­˜åœ¨"

# åˆ›å»ºç¼ºå¤±çš„è¡¨
docker compose exec mysql mysql -u root -prootpassword forsion_ai_studio << 'EOF'
CREATE TABLE IF NOT EXISTS user_credits (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) UNIQUE NOT NULL,
  balance DECIMAL(10, 2) DEFAULT 0.00,
  total_earned DECIMAL(10, 2) DEFAULT 0.00,
  total_spent DECIMAL(10, 2) DEFAULT 0.00,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_user_id (user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS invite_codes (
  id VARCHAR(36) PRIMARY KEY,
  code VARCHAR(50) UNIQUE NOT NULL,
  max_uses INT NOT NULL DEFAULT 1,
  used_count INT DEFAULT 0,
  initial_credits DECIMAL(10, 2) DEFAULT 0.00,
  created_by VARCHAR(36),
  expires_at DATETIME,
  is_active BOOLEAN DEFAULT TRUE,
  notes TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_code (code),
  INDEX idx_is_active (is_active)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
EOF

# é‡å¯åç«¯æœåŠ¡
docker compose restart backend
```

#### é—®é¢˜ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šåç«¯æ—¥å¿—æ˜¾ç¤º `ECONNREFUSED` æˆ– `Failed to connect to database`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥ MySQL æ˜¯å¦æ­£å¸¸è¿è¡Œ
docker compose ps mysql

# 2. ç­‰å¾… MySQL å®Œå…¨å¯åŠ¨ï¼ˆçº¦ 30 ç§’ï¼‰
docker compose exec mysql mysqladmin ping -h localhost -u root -prootpassword

# 3. æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
docker compose exec backend env | grep DB_

# 4. é‡å¯åç«¯æœåŠ¡
docker compose restart backend
```

### ç«¯å£é…ç½®é—®é¢˜

#### é—®é¢˜ï¼šè®¿é—®åœ°å€ä¸æ­£ç¡®

**ç—‡çŠ¶**ï¼šè®¿é—® `http://localhost:8080` è¿”å›å…¶ä»–æœåŠ¡ï¼ˆå¦‚ WordPressï¼‰çš„é¡µé¢

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **æ£€æŸ¥å®é™…ç«¯å£æ˜ å°„**ï¼š
   ```bash
   docker compose ps
   # æŸ¥çœ‹å‰ç«¯å®¹å™¨çš„ PORTS åˆ—ï¼Œç¡®è®¤å®é™…æ˜ å°„çš„ç«¯å£
   ```

2. **æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®**ï¼š
   ```bash
   cat .env | grep FRONTEND_PORT
   # å¦‚æœè®¾ç½®äº† FRONTEND_PORT=1111ï¼Œåˆ™è®¿é—® http://localhost:1111
   ```

3. **ä½¿ç”¨æ­£ç¡®çš„è®¿é—®åœ°å€**ï¼š
   - å‰ç«¯ï¼š`http://localhost:å®é™…ç«¯å£`ï¼ˆå¯èƒ½æ˜¯ 1111 æˆ–å…¶ä»–ï¼‰
   - åç«¯ç›´æ¥è®¿é—®ï¼š`http://localhost:3002/api/health`
   - ç®¡ç†åå°ï¼š`http://localhost:å®é™…ç«¯å£/admin`

### è®¤è¯é—®é¢˜

#### é—®é¢˜ï¼š401 Unauthorized æˆ– "Invalid or expired token"

**ç—‡çŠ¶**ï¼šç®¡ç†åå°æˆ– API è¯·æ±‚è¿”å› 401 é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **æ¸…é™¤æµè§ˆå™¨å­˜å‚¨å¹¶é‡æ–°ç™»å½•**ï¼š
   ```javascript
   // åœ¨æµè§ˆå™¨ Console ä¸­æ‰§è¡Œ
   localStorage.clear();
   sessionStorage.clear();
   location.reload();
   ```

2. **æ£€æŸ¥ JWT_SECRET é…ç½®**ï¼š
   ```bash
   # ç¡®ä¿ .env ä¸­çš„ JWT_SECRET å·²è®¾ç½®
   cat .env | grep JWT_SECRET
   
   # ç¡®ä¿åç«¯ä½¿ç”¨äº†æ­£ç¡®çš„å¯†é’¥
   docker compose exec backend env | grep JWT_SECRET
   
   # å¦‚æœä¸åŒï¼Œç»Ÿä¸€é…ç½®åé‡å¯
   docker compose restart backend
   ```

3. **é‡æ–°ç™»å½•è·å–æ–° token**ï¼š
   - è®¿é—®ä¸»é¡µé¢ï¼š`http://localhost:å®é™…ç«¯å£/`
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼š`admin` / `Admin123!@#`
   - ç™»å½•æˆåŠŸåå†è®¿é—®ç®¡ç†åå°

### æŸ¥çœ‹æ—¥å¿—å’Œè°ƒè¯•

#### æŸ¥çœ‹æœåŠ¡æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose logs -f backend
docker compose logs -f frontend
docker compose logs -f mysql

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—
docker compose logs --tail=100 backend

# è¿‡æ»¤é”™è¯¯æ—¥å¿—
docker compose logs backend | grep -i error
```

#### æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker compose ps

# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
docker compose ps | grep healthy

# æµ‹è¯• API å¥åº·æ£€æŸ¥
curl http://localhost:å®é™…ç«¯å£/api/health
curl http://localhost:3002/api/health
```

#### è¿›å…¥å®¹å™¨è°ƒè¯•

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker compose exec backend sh

# è¿›å…¥ MySQL å®¹å™¨
docker compose exec mysql mysql -u root -prootpassword

# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker compose exec backend env | grep -E "DB_|JWT|PORT"
```

### å®Œæ•´ä¿®å¤è„šæœ¬

å¦‚æœé‡åˆ°å¤šä¸ªæ•°æ®åº“é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸€é”®ä¿®å¤è„šæœ¬ï¼š

```bash
cat > fix-database.sh << 'EOF'
#!/bin/bash
MYSQL_PASS="${MYSQL_ROOT_PASSWORD:-rootpassword}"

echo "ğŸ”§ ä¿®å¤æ•°æ®åº“ç»“æ„..."

# æ·»åŠ ç¼ºå¤±å­—æ®µ
docker compose exec mysql mysql -u root -p"$MYSQL_PASS" forsion_ai_studio -e "
ALTER TABLE global_models 
  ADD COLUMN avatar MEDIUMTEXT AFTER icon,
  ADD COLUMN prompt_caching_enabled BOOLEAN DEFAULT FALSE AFTER is_enabled,
  ADD COLUMN system_prompt TEXT AFTER prompt_caching_enabled,
  ADD COLUMN cacheable_content TEXT AFTER system_prompt;
" 2>/dev/null || echo "å­—æ®µå¯èƒ½å·²å­˜åœ¨"

# åˆ›å»ºç¼ºå¤±çš„è¡¨
docker compose exec mysql mysql -u root -p"$MYSQL_PASS" forsion_ai_studio << 'SQL'
CREATE TABLE IF NOT EXISTS user_credits (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) UNIQUE NOT NULL,
  balance DECIMAL(10, 2) DEFAULT 0.00,
  total_earned DECIMAL(10, 2) DEFAULT 0.00,
  total_spent DECIMAL(10, 2) DEFAULT 0.00,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_user_id (user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS invite_codes (
  id VARCHAR(36) PRIMARY KEY,
  code VARCHAR(50) UNIQUE NOT NULL,
  max_uses INT NOT NULL DEFAULT 1,
  used_count INT DEFAULT 0,
  initial_credits DECIMAL(10, 2) DEFAULT 0.00,
  created_by VARCHAR(36),
  expires_at DATETIME,
  is_active BOOLEAN DEFAULT TRUE,
  notes TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_code (code),
  INDEX idx_is_active (is_active)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
SQL

docker compose restart backend
echo "âœ… ä¿®å¤å®Œæˆï¼"
EOF

chmod +x fix-database.sh
./fix-database.sh
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
forsion-ai-studio/
â”œâ”€â”€ client/                 # å‰ç«¯ä»£ç  (React + Vite)
â”‚   â”œâ”€â”€ App.tsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ index.tsx          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx   # èŠå¤©åŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx    # ä¾§è¾¹æ 
â”‚   â”‚   â””â”€â”€ SettingsModal.tsx # è®¾ç½®å¼¹çª—
â”‚   â”œâ”€â”€ services/          # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ authService.ts # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ backendService.ts # åç«¯ API
â”‚   â”‚   â”œâ”€â”€ geminiService.ts # Gemini API
â”‚   â”‚   â””â”€â”€ externalApiService.ts # å¤–éƒ¨ API
â”‚   â”œâ”€â”€ types.ts           # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ constants.ts       # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ config.ts          # è¿è¡Œæ—¶é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts     # Vite é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json      # TypeScript é…ç½®
â”‚   â””â”€â”€ package.json       # å‰ç«¯ä¾èµ–
â”œâ”€â”€ server-node/           # åç«¯ä»£ç  (Node.js + Express)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts       # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/        # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ db/            # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â””â”€â”€ types/         # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ Dockerfile         # åç«¯ Docker
â”‚   â”œâ”€â”€ tsconfig.json      # TypeScript é…ç½®
â”‚   â””â”€â”€ package.json       # åç«¯ä¾èµ–
â”œâ”€â”€ admin/                 # ç®¡ç†é¢æ¿ (é™æ€ HTML)
â”‚   â””â”€â”€ index.html         # ç®¡ç†ç•Œé¢
â”œâ”€â”€ docker-compose.yml     # Docker ç¼–æ’
â”œâ”€â”€ Dockerfile             # å‰ç«¯ Docker
â”œâ”€â”€ nginx.conf             # Nginx é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
