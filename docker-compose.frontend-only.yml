# =====================================================
# Forsion AI Studio - 仅前端部署配置
# 
# 使用场景：后端已单独部署，只需要部署前端
# 
# 使用方法:
#   docker compose -f docker-compose.frontend-only.yml up -d
#   或
#   docker compose -f docker-compose.yml -f docker-compose.frontend-only.yml up -d frontend
# =====================================================

services:
  # React 前端服务 (Nginx)
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: forsion_frontend
    restart: unless-stopped
    ports:
      - "${FRONTEND_PORT:-8080}:80"
    environment:
      # 后端 API 地址 - 必须配置为实际的后端地址
      # 例如：http://your-backend-host:3001
      # 或者：http://192.168.1.100:3001
      # 或者：https://api.yourdomain.com
      BACKEND_URL: ${BACKEND_URL}
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 30s
      timeout: 10s
      start_period: 10s
      retries: 3
    # 如果后端在外部网络，可能需要配置网络
    # networks:
    #   - external_network

